@model IP3_Group4.Models.Analytics

@{
    ViewBag.Title = "Stats";
}

<h2>Stats</h2>

@if (User.Identity.IsAuthenticated)
{
    if (ViewBag.HasReceipts == true)
    {

        <div class="row">
            <div class="col-md-6" style="text-align: center;">
                <h4>Your spending this month versus last month:</h4>
                <img width="1000" height="400" src='@Url.Action("SpendingComparison", "Stats")' alt="Chart" />
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <h4>The shops you've visited:</h4>
                <img width="550" height="400" src='@Url.Action("Shops", "Stats")' alt="Chart" />
            </div>

            <div class="col-md-6" style="text-align:center;">
                <br />
                <br />

                <h4>Your favourite shop:</h4>

                <h1>@Model.Shops[0].Shop</h1>
                @if (Model.Shops[0].Visits > 0)
                {
                    <h4>with @Model.Shops[0].Visits visits.</h4>
                }
                <br />
                @Html.ActionLink("View All Visited Shops", "AllShopDetails", "Stats", new { @class = "btn btn-info" })
            </div>
        </div>

        <hr />

        <div class="row">
            <div class="col-md-6">
                <h4>What you spent money on:</h4>
                <img width="550" height="400" src='@Url.Action("ProductsBought", "Stats")' alt="Chart" />
            </div>

            <div class="col-md-6" style="text-align:center;">
                <br />
                <br />

                <h4>Your most bought product is:</h4>
                <h1>@Model.Products[0].Product</h1>
                @if (Model.Products[0].Buys > 0)
                {
                    <h4>with @Model.Products[0].Buys buys.</h4>
                }
                <br />
                @Html.ActionLink("View All Bought Products", "AllProductDetails", "Stats", new { @class = "btn btn-info" })
            </div>

        </div>

    }
    else
    {
        <h3>Scan some receipts to see this page!</h3>
    }
}
else
{
<h4 class="alert alert-danger">You must be @Html.ActionLink("logged in", "Login", "Account") to view this page!</h4>
}